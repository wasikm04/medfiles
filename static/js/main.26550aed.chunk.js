(this.webpackJsonpmedfiles=this.webpackJsonpmedfiles||[]).push([[0],{102:function(e,t,a){},105:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),o=a.n(l),c=(a(102),a(13)),i=a(11),s=a(20),u=a(21),m=a(22),d=(a(103),a(39)),p=(a(105),a(12)),h=a(35),b=a(72),f=a(183),E=a(169),g=a(172),O=a(49),v=a(171),y=a(173),j=a(174),w=a(175),C=a(82),S=a.n(C),k=a(80),x=a.n(k),P=a(79),D=a.n(P),A=a(81),z=a.n(A),W=a(77),F=a.n(W),_=a(78),L=a.n(_),N=a(76),I=a.n(N),R=a(9);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var q=r.a.createContext(),B=q.Consumer,M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={card:{_id:"",_user_mail:"",_user_id:"",first_name:"",last_name:"",dateBirth:"",sex:"m",address:"",phoneNumber:"",insuranceType:"",prescriptions:[],medicalTests:[],referrals:[],treatments:[],pesel:""},isAuthenticated:!1,isDoctor:!1,doctorCard:{},user:"",updateCard:function(e){return a.updateCard(e)}},a.updateCard=function(e){a.setState((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{},e)}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(q.Provider,{value:this.state},this.props.children)}}]),t}(n.Component),H=Object(b.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,background:"rgb(232,232,232)"},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)},colour:{background:"indigo",color:"white"},back:{background:"rgb(128,128,128)"}}}));function K(){var e=H(),t=Object(n.useContext)(q),a=t.isAuthenticated,l=t.isDoctor;return r.a.createElement("div",{className:e.root},r.a.createElement(E.a,null),r.a.createElement(f.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},r.a.createElement(p.b,{className:e.colour,to:"/",color:"textPrimary"},r.a.createElement("div",{className:e.toolbar},r.a.createElement(O.a,{className:e.toolbar,variant:"h4",align:"center",justify:"center"},"MedFiles"))),r.a.createElement(v.a,null),a?r.a.createElement(g.a,null,r.a.createElement(p.b,{to:"/home",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(I.a,null)),r.a.createElement(w.a,{secondary:"Strona G\u0142\xf3wna"}))),l?r.a.createElement(p.b,{to:"/card",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(F.a,null)),r.a.createElement(w.a,{secondary:"Karta Pacjenta"}))):r.a.createElement(p.b,{to:"/doctor-card",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(L.a,null)),r.a.createElement(w.a,{secondary:"Karta Lekarza"}))),r.a.createElement(p.b,{to:"/appointments",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(D.a,null)),r.a.createElement(w.a,{secondary:"Wizyty"}))),r.a.createElement(v.a,null),r.a.createElement(p.b,{to:"/logout",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(x.a,null)),r.a.createElement(w.a,{secondary:"Wyloguj"})))):r.a.createElement(g.a,null,r.a.createElement(p.b,{to:"/login",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(z.a,null)),r.a.createElement(w.a,{secondary:"Logowanie"}))),r.a.createElement(p.b,{to:"/register",color:"textPrimary"},r.a.createElement(y.a,{button:!0},r.a.createElement(j.a,null,r.a.createElement(S.a,null)),r.a.createElement(w.a,{secondary:"Rejestracja"})))),r.a.createElement(v.a,null)))}var Z=function(){return r.a.createElement(B,null,(function(e){var t=e.card;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,"Karta: ",t)),r.a.createElement(p.b,{to:"/profile-update"},"Aktualizacja karty"))}))};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mail:a.props.mail,firstname:a.props.firstname,lastname:a.props.lastname},a.handleOnChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(R.a)({},r,n))},a.handleOnSubmit=function(e){e.preventDefault();var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state);a.props.updateCard(t)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.mail;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleOnSubmit},r.a.createElement("label",{htmlFor:"firstname"},"Imi\u0119"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"firstname",value:t,onChange:this.handleOnChange})),r.a.createElement("label",{htmlFor:"lastname"},"Nazwisko"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,name:"lastname",onChange:this.handleOnChange})),r.a.createElement("label",{htmlFor:"mail"},"Mail"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:n,name:"mail",onChange:this.handleOnChange})),r.a.createElement("input",{type:"submit",value:"Zapisz"}),r.a.createElement("button",null,"Send data!")))}}]),t}(n.Component),Q=function(e){return r.a.createElement(B,null,(function(t){var a=t.firstname,n=t.lastname,l=t.mail,o=t.id,c=t.updateCard;return r.a.createElement(J,Object.assign({},e,{firstname:a,lastname:n,mail:l,id:o,updateCard:c}))}))},U=a(83),V=a.n(U),X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:a.props.user,isAuthenticated:a.props.isAuthenticated,card:"",doctorCard:a.props.doctorCard},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=a(46);e.get("/card/"+this.state.username+"/",{withCredentials:!0}).then((function(e){console.log(e),this.setState({card:e})})).catch((function(e){console.log(e)})),this.state.isDoctor&&e.get("/doctor-card/"+this.state.card.data._user_id,{withCredentials:!0}).then((function(e){console.log(e),this.props.updateCard({doctorCard:e})})).catch((function(e){console.log(e)})),this.props.updateCard({card:this.state.card})}},{key:"render",value:function(){return r.a.createElement("div",null,"user:",console.log(this.state.card))}}]),t}(n.Component),Y=Object(d.b)((function(e){return r.a.createElement(B,null,(function(t){var a=t.isAuthenticated,n=t.user,l=t.doctorCard,o=t.isDoctor,c=t.updateCard;return r.a.createElement(X,Object.assign({},e,{isAuthenticated:a,user:n,doctorCard:l,isDoctor:o,updateCard:c}))}))})),$=a(30),ee=a(178),te=a(181),ae=a(176),ne=a(177),re=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(R.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){n.setState({isStatus:!0}),e.preventDefault();var t=new FormData;t.append("username",n.state.username),t.append("password",n.state.password);var r=a(46);r.post("/login",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.get("/user/role/"+n.state.username+"/",{withCredentials:!0}).then((function(e){var t=!!e.data.includes("ROLE_DOCTOR");n.props.updateCard({isDoctor:t,isAuthenticated:!0,user:n.state.username}),n.setState({password:"",isAuthenticated:!0,isStatus:!1}),localStorage.setItem("username",n.state.username)})).catch((function(e){this.setState({status:"Pobranie roli u\u017cytkownika nieudane "+e,isStatus:!1}),console.log(e)}))})).catch((function(e){this.setState({status:"Logowanie nieudane "+e,isStatus:!1}),console.log(e)}))},n.state={isAuthenticated:n.props.isAuthenticated,username:"",password:"",isStatus:!1,status:""},n.handleSubmit=n.handleSubmit.bind(Object($.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"componentDidMount",value:function(){var e=this;if(null!=this.props.cookies.get("SESSION")){var t=localStorage.getItem("username");if(null!=t)a(46).get("/user/role/"+t+"/",{withCredentials:!0}).then((function(a){var n=!!a.data.includes("ROLE_DOCTOR");e.props.updateCard({isDoctor:n,isAuthenticated:!0,user:t}),e.setState({isAuthenticated:!0})})).catch((function(e){console.log(e)}))}}},{key:"render",value:function(){return this.state.isAuthenticated?r.a.createElement(h.a,{to:{pathname:"/home",state:{from:this.props.location}}}):r.a.createElement(ae.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(O.a,{align:"center",component:"h1",variant:"h5"},"Logowanie"),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email ",name:"email",autoComplete:"Adres email",autoFocus:!0,onChange:this.handleChange}),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",autoComplete:"Wpisz has\u0142o",onChange:this.handleChange}),this.state.isStatus?r.a.createElement(O.a,{variant:"h4",component:"h3",align:"center",margin:"normal"},r.a.createElement(ne.a,{align:"center"})):r.a.createElement(ee.a,{disabled:!this.validateForm(),type:"submit",fullWidth:!0,color:"primary",variant:"contained"},"Zaloguj")),r.a.createElement(O.a,{variant:"h4",component:"h3",align:"center",margin:"normal"},this.state.status))}}]),t}(n.Component),le=function(e){return r.a.createElement(B,null,(function(t){var a=t.isAuthenticated,n=t.updateCard;return r.a.createElement(re,Object.assign({},e,{isAuthenticated:a,updateCard:n}))}))},oe=a(2),ce=function(e){var t=e.component,a=Object(oe.a)(e,["component"]),l=Object(n.useContext)(q).isAuthenticated;return r.a.createElement(h.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(h.a,{to:"/login"})}}))},ie=a(179),se=a(84),ue=a.n(se),me=a(85),de=a.n(me),pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateForm=function(){return n.state.email.length>0&&n.state.password.length>0&&n.state.repassword===n.state.password},n.handleChange=function(e){n.setState(Object(R.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({status:"",isStatus:!0});var t=new FormData;t.append("email",n.state.email),t.append("password",n.state.password);a(46).post("/register",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){n.setState({status:"Pomy\u015blnie dokonano rejestracji",isStatus:!1})})).catch((function(e){this.setState({status:"Rejestracja nieudana "+e,isStatus:!1}),console.log(e)}))},n.state={email:"",password:"",repassword:"",status:"",isStatus:!1},n.handleSubmit=n.handleSubmit.bind(Object($.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(ae.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(O.a,{align:"center",component:"h1",variant:"h5"},"Rejestracja"),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email ",name:"email",autoComplete:"Adres email",autoFocus:!0,onChange:this.handleChange}),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",autoComplete:"Wpisz has\u0142o",onChange:this.handleChange}),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Has\u0142o",type:"password",id:"repassword",autoComplete:"Wpisz has\u0142o ponownie",onChange:this.handleChange}),this.state.isStatus?r.a.createElement(O.a,{variant:"h4",component:"h3",align:"center",margin:"normal"},r.a.createElement(ne.a,{align:"center"})):r.a.createElement(ee.a,{disabled:!this.validateForm(),type:"submit",fullWidth:!0,color:"primary",variant:"contained"},"Zarejestruj")),r.a.createElement(O.a,{variant:"h4",component:"h3",align:"center",margin:"normal"},this.state.status))}}]),t}(n.Component),he=a(180),be={appBar:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,marginTop:25}},fe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(M,null,r.a.createElement(p.a,null,r.a.createElement(K,null),r.a.createElement(ie.a,{container:!0,spacing:2,direction:"column",alignItems:"center",justify:"center",style:be.appBar},r.a.createElement(h.d,null,r.a.createElement(ce,{exact:!0,path:"/home",component:function(){return r.a.createElement(Y,null)}}),r.a.createElement(ce,{exact:!0,path:"/appointments",component:function(){return r.a.createElement(de.a,null)}}),r.a.createElement(h.b,{exact:!0,path:"/doctor-card",component:function(){return r.a.createElement(V.a,null)}}),r.a.createElement(h.b,{exact:!0,path:"/card",component:function(){return r.a.createElement(Z,null)}}),r.a.createElement(h.b,{exact:!0,path:"/card/update",component:function(){return r.a.createElement(Q,null)}}),r.a.createElement(h.b,{exact:!0,path:"/logout",component:function(){return r.a.createElement(ue.a,null)}}),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ie.a,{item:!0,xs:4,direction:"columns",justify:"center",alignItems:"center"},r.a.createElement(he.a,null,r.a.createElement(O.a,{variant:"h5",component:"h2",align:"center",paragraph:!0},"Witaj na stronie do zarz\u0105dzania kartotekami medycznymi, zaloguj si\u0119 aby uzyska\u0107 dost\u0119p do kartoteki lub za\u0142\xf3\u017c konto aby utworzy\u0107 w\u0142asn\u0105 kart\u0119.")))}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(le,{cookies:e.props.cookies})}}),r.a.createElement(h.b,{exact:!0,path:"/register",component:function(){return r.a.createElement(pe,null)}})))))}}]),t}(n.Component),Ee=Object(d.b)(fe);o.a.render(r.a.createElement(d.a,null,r.a.createElement(Ee,null)),document.getElementById("root"))},83:function(e,t){},84:function(e,t){},85:function(e,t){},97:function(e,t,a){e.exports=a(134)}},[[97,1,2]]]);
//# sourceMappingURL=main.26550aed.chunk.js.map